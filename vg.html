<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Bootstrap Basic Portfolio</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

</head>

<body>
  <style>
    #file {
      margin: 30px;
    }

    img {
      margin: 30px;
      width: 300px;
      height: 300px;
      border: 2px solid grey;
    }

    video#player {
      margin: 30px;
      background-color: lightslategray;
    }

    #image {
      display: in-line;
    }

    .btn {
      margin-bottom: 20px;
    }

    button#capture {
      margin-left: -300px;
    }
  </style>
  <div id="uploadForm">
    <label for="file-input" class="btn btn btn-lg">
      <span class="glyphicon glyphicon-camera"></span>
    </label>
    <input id="file-input" type="file" accept="image/*;capture=camera" />
  </div>
  <div class="image">
    <div id="player" width=320 height=240 controls autoplay></div>
  </div>
  <canvas id="canvas" width=320 height=240></canvas>
  <script type='text/javascript' src="https://wurfl.io/wurfl.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  <script>
    function filePreview(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
          $('#uploadForm + img').remove();
          $('#uploadForm').after('<img src="' + e.target.result + '"/>');
        }
        reader.readAsDataURL(input.files[0]);
        console.log(DataURL);
      }
      $("#file-input").change(function () {
        filePreview(this);
      });
    }
    // console.log(WURFL.is_mobile);
    if (WURFL.is_mobile == true) {
      console.log("i'm in");
      filePreview(input);
    } else {
      console.log("i'm out!");
    }
  </script>
  <script>
    function previewFiles() {

  var preview = document.querySelector('#preview');
  var files   = document.querySelector('input[type=file]').files;

  function readAndPreview(file) {

    // Make sure `file.name` matches our extensions criteria
    if ( /\.(jpe?g|png|gif)$/i.test(file.name) ) {
      var reader = new FileReader();

      reader.addEventListener("load", function () {
        var image = new Image();
        image.height = 100;
        image.title = file.name;
        image.src = this.result;
        preview.appendChild( image );
      }, false);

      reader.readAsDataURL(file);
    }

  }

  if (files) {
    [].forEach.call(files, readAndPreview);
  }

}
    // const output = document.getElementById('output');
    // const fileInput = document.getElementById('file-input');
    // // const target = document.getElementById('target');
    // const supported = 'mediaDevices' in navigator;
    // const player = document.getElementById('player');
    // const canvas = document.getElementById('canvas');
    // const context = canvas.getContext('2d');
    // const captureButton = document.getElementById('capture');
    // const cameraButton = document.getElementById('camera');
    // const constraints = {
    //   video: true,
    // };
    // captureButton.addEventListener('click', () => {
    //   // Draw the video frame to the canvas.
    //   context.drawImage(player, 0, 0, canvas.width, canvas.height);
    //   player.srcObject.getVideoTracks().forEach(track => track.stop());
    //   var dl = document.createElement("a");
    //   dl.href = canvas.toDataURL("image/jpeg").replace("image/jpeg", "image/octet-stream");
    //   console.log(dl.href);
    //   dl.innerHTML = "Download Image!";
    //   dl.download = 'image.jpg'; // Make sure the browser downloads the image
    //   document.body.appendChild(dl); // Needs to be added to the DOM to work
    //   dl.click();
    // });
    // cameraButton.addEventListener('click', () => {
    //   // Attach the video stream to the video element and autoplay.
    //   navigator.mediaDevices.getUserMedia(constraints)
    //     .then((stream) => {
    //       player.srcObject = stream;
    //     })
    // })
  </script>